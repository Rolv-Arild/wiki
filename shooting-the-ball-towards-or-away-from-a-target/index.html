
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../scripts/">
      
      
        <link rel="next" href="../sockets-specification/">
      
      
      <link rel="icon" href="../assets/rlbot-logo.svg">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.4">
    
    
      
        <title>Shooting the ball towards or away from a target - RLBot Wiki</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bd3936ea.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#this-tutorial-is-not-language-specific" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="RLBot Wiki" class="md-header__button md-logo" aria-label="RLBot Wiki" data-md-component="logo">
      
  <img src="../assets/rlbot-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RLBot Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Shooting the ball towards or away from a target
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="RLBot Wiki" class="md-nav__button md-logo" aria-label="RLBot Wiki" data-md-component="logo">
      
  <img src="../assets/rlbot-logo.svg" alt="logo">

    </a>
    RLBot Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RLBot
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../air-show/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Air show
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../antivirus-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Antivirus notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../ball-path-prediction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ball path prediction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../bot-customization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bot customization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../community-guidelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Community guidelines
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../config-file-documenation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bot Config File
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../console-commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Console commands
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../dropshot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dropshot
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../extracting-map-meshes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extracting map meshes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../hoops/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hoops
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../input-and-output-data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Input and Output Data (current)
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../jumping-physics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The Physics Of Jumping
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../lan-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lan setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../machine-learning-faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Machine learning faq
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../manipulating-game-state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Manipulating game state
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../matchcomms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Matchcomms
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../missing-pages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Missing pages
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../operating-system-support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operating system support
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../psyonix-api-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Psyonix api notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../quickchat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickchat
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../rendering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rendering
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../rlbot-pack/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RLBot Pack
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../rlbot-specific-game-settings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rlbot specific game settings
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../rocket-league-story-mode/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rocket league story mode
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scripts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Shooting the ball towards or away from a target
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Shooting the ball towards or away from a target
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#this-tutorial-is-not-language-specific" class="md-nav__link">
    This tutorial is NOT language-specific!
  </a>
  
    <nav class="md-nav" aria-label="This tutorial is NOT language-specific!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toc" class="md-nav__link">
    TOC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targets-and-anti-targets" class="md-nav__link">
    Targets and anti-targets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direction-of-approach" class="md-nav__link">
    Direction of approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ball-location-offset" class="md-nav__link">
    Ball location offset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aligning-with-the-direction-of-approach" class="md-nav__link">
    Aligning with the direction of approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#driving" class="md-nav__link">
    Driving
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sockets-specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sockets specification
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../supported-programming-languages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Supported programming languages
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../team-match-communication-protocol/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TMCP
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tick-rate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tick rate
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../tips-for-running-tournaments/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tips for running tournaments
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation errors
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../useful-game-values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful game values
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../workshop-custom-maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workshop custom maps
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#this-tutorial-is-not-language-specific" class="md-nav__link">
    This tutorial is NOT language-specific!
  </a>
  
    <nav class="md-nav" aria-label="This tutorial is NOT language-specific!">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#toc" class="md-nav__link">
    TOC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#targets-and-anti-targets" class="md-nav__link">
    Targets and anti-targets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direction-of-approach" class="md-nav__link">
    Direction of approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ball-location-offset" class="md-nav__link">
    Ball location offset
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aligning-with-the-direction-of-approach" class="md-nav__link">
    Aligning with the direction of approach
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#driving" class="md-nav__link">
    Driving
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Shooting the ball towards or away from a target</h1>

<h2 id="this-tutorial-is-not-language-specific">This tutorial is NOT language-specific!</h2>
<p>This tutorial is based on the systems used by <a href="https://github.com/VirxEC/VirxERLU">VirxERLU</a> which is a fork of <a href="https://github.com/ddthj/GoslingUtils">GoslingUtils</a>.</p>
<h3 id="toc">TOC</h3>
<ul>
<li><a href="#this-tutorial-is-not-language-specific">This tutorial is NOT language-specific!</a></li>
<li><a href="#toc">TOC</a></li>
<li><a href="#targets-and-anti-targets">Targets and anti-targets</a></li>
<li><a href="#direction-of-approach">Direction of approach</a></li>
<li><a href="#ball-location-offset">Ball location offset</a></li>
<li><a href="#aligning-with-the-direction-of-approach">Aligning with the direction of approach</a></li>
<li><a href="#driving">Driving</a></li>
</ul>
<h3 id="targets-and-anti-targets">Targets and anti-targets</h3>
<p>Firstly, a <em>target</em> is something that we want to hit the ball towards, and an <em>anti-target</em> is something that we want to hit the ball away from.</p>
<ul>
<li>Targets: This will be a list of two vectors. The first vector will be the left-most target, and the second will be the right-most target.</li>
<li>Anti-targets: This is the same as targets, but you swap the left-most and right-most targets <strong>before giving them to the algorithm, and <em>all the following code stays the same</em></strong>! This causes the algorithm to shoot the ball anywhere but between the two targets.</li>
</ul>
<p>We're using two points instead of just one, central point that represents the target because just one point is unrealistic and restricts our options. Two points, however, gives us a range to work with and some room for error.</p>
<p><a href="/useful-game-values">Useful game values</a></p>
<p>For example, our left-most target vector could be <code>[800, 5213, 321.3875]</code> (orange's left goal post) and our right-most target vector could be <code>[-800, 5213, 321.3875]</code> (orange's right goal post). These values have been adjusted to account for the ball's radius (which is 92.75).</p>
<h3 id="direction-of-approach">Direction of approach</h3>
<p>Now we need to find the direction that we need to hit the ball in. It wouldn't be fun if we ended up hitting the ball away from our target!</p>
<p>In order to do this, we need the following information:
* Left-most target
* Right-most target
* Ball location
* Car location</p>
<p>Let's get started!</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">Vector</span><span class="w"> </span><span class="n">car_to_ball</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ball_location</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">car_location</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">Vector</span><span class="w"> </span><span class="n">car_to_ball_direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">car_to_ball</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">Vector</span><span class="w"> </span><span class="n">ball_to_left_target_direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">left_target_location</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">ball_location</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">Vector</span><span class="w"> </span><span class="n">ball_to_right_target_direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">right_target_location</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">ball_location</span><span class="p">)</span>
</code></pre></div>
<p>These are a bunch of directions, and they're fairly well described just by the variable names. You will have to implement your own normalize function, but <a href="http://www.fundza.com/vectors/normalize/">here's the math behind it if you didn't know</a>. <em>Many example bots, including the ones for Python and Java, already have vector classes that have implemented this for you!</em></p>
<p>Next, we need some way to change <code>car_to_ball_direction</code> so that it's between <code>ball_to_left_target_direction</code> and <code>ball_to_right_target_direction</code>. That's what the following function <code>clamp2D</code> does.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">Vector</span><span class="w"> </span><span class="nf">clamp2D</span><span class="p">(</span><span class="n">Vector</span><span class="w"> </span><span class="n">direction</span><span class="p">,</span><span class="w"> </span><span class="n">Vector</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">Vector</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dotProduct</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span><span class="w"> </span><span class="n">crossProduct</span><span class="p">(</span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]))</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dotProduct</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span><span class="w"> </span><span class="n">crossProduct</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">((</span><span class="n">dotProduct</span><span class="p">(</span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="n">crossProduct</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">]))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">is_right</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">is_left</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">is_right</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">is_left</span><span class="p">))</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">direction</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">dotProduct</span><span class="p">(</span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">direction</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">dotProduct</span><span class="p">(</span><span class="n">end</span><span class="p">,</span><span class="w"> </span><span class="n">direction</span><span class="p">))</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">end</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">start</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="p">}</span>
</code></pre></div>
<p>You will also have to implement your own dotProduct and crossProduct functions. <a href="https://www.mathsisfun.com/algebra/vectors-dot-product.html">See here to learn how to find the dot product of two vectors</a> and <a href="https://www.mathsisfun.com/algebra/vectors-cross-product.html">see here to learn how to find the cross product of two vectors</a>. <em>Many example bots, including the ones for Python and Java, already have vector classes that have implemented this for you!</em></p>
<ul>
<li>Similar to integer clamping, clamp2D forces a direction between <code>start</code> and <code>end</code>, such that <code>start</code> &lt; <code>direction</code> &lt; <code>end</code> in terms of clockwise rotation.</li>
<li>Note that this is only in the x-axis and y-axis - clamping the z-axis isn't necessary for this problem.</li>
<li>For the math nerds: Why does this work? This function relies on Rocket League's inverted X-axis (positive X is left and negative X is right). <a href="/useful-game-values#basic-dimensions">See this page</a> for a top-down view of the Rocket League field and different coordinates pertaining to the field.</li>
</ul>
<p>Now we can use the <code>clamp2D</code> function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">Vector</span><span class="w"> </span><span class="n">direction_of_approach</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">clamp2D</span><span class="p">(</span><span class="n">car_to_ball_direction</span><span class="p">,</span><span class="w"> </span><span class="n">ball_to_left_target_direction</span><span class="p">,</span><span class="w"> </span><span class="n">ball_to_right_target_direction</span><span class="p">)</span>
</code></pre></div>
<p>This is the direction that our bot should approach the ball at.</p>
<h3 id="ball-location-offset">Ball location offset</h3>
<p>Next, we're going to take the ball's radius as well as our direction of approach into account in order to offset our final target from the ball's location.</p>
<p>The basis behind this is that we will go in the opposite direction of our direction of approach, and give the direction a magnitude of 92.75 (which is the ball's radius).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">Vector</span><span class="w"> </span><span class="n">offset_ball_location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ball_location</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="p">(</span><span class="n">direction_of_approach</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">92.75</span><span class="p">)</span>
</code></pre></div>
<h3 id="aligning-with-the-direction-of-approach">Aligning with the direction of approach</h3>
<p>This is where the math gets into approximations. What we need to do is cause the car to slowly circle around <code>offset_ball_location</code> until our direction to the ball matches or is close to <code>direction_of_approach</code> while also getting closer and closer to the target.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">side_of_approach_direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sign</span><span class="p">(</span><span class="n">dotProduct</span><span class="p">(</span><span class="n">crossProduct</span><span class="p">(</span><span class="n">direction_of_approach</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">]),</span><span class="w"> </span><span class="n">ball_location</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">car_location</span><span class="p">))</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">Vector</span><span class="w"> </span><span class="n">car_to_ball_perpendicular</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">normalize</span><span class="p">(</span><span class="n">crossProduct</span><span class="p">(</span><span class="n">car_to_ball</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">side_of_approach_direction</span><span class="p">]))</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">Vector</span><span class="w"> </span><span class="n">adjustment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">abs</span><span class="p">(</span><span class="n">angle</span><span class="p">(</span><span class="n">flatten</span><span class="p">(</span><span class="n">car_to_ball</span><span class="p">),</span><span class="w"> </span><span class="n">flatten</span><span class="p">(</span><span class="n">direction_of_approach</span><span class="p">)))</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2560</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="n">Vector</span><span class="w"> </span><span class="n">final_target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">offset_ball_location</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">car_to_ball_perpendicular</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">adjustment</span><span class="p">)</span>
</code></pre></div>
<ul>
<li>You will need to implement your own sign. This returns -1 if the value is negative, 0 if the value is 0, and 1 if the value is positive.</li>
<li>Most languages have their own abs (absolute value) function built-in. <a href="https://www.mathsisfun.com/numbers/absolute-value.html">See here to learn what absolute value is</a>.</li>
<li>You will also need to implement your own flatten and angle functions. Flatten makes the z value of a vector equal to 0. <a href="https://onlinemschool.com/math/library/vector/angl/">See here to learn how to find the angle between two vectors</a>. <em>Many example bots, including the ones for Python and Java, already have vector classes that have implemented this for you!</em></li>
</ul>
<h3 id="driving">Driving</h3>
<p>Once you have <code>final_target</code>, all you have to do is face it and drive towards it. It will automatically adjust itself as your bot starts moving.</p>
<p>If you want to get to the target at a specific time - for example, if you're using the ball prediction - then you need the required speed in order to get to the target at that exact time. This is fairly simple, as we just need to find the distance that we need to travel and divide by the remaining time.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kt">double</span><span class="w"> </span><span class="n">distance_remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">magnitude</span><span class="p">(</span><span class="n">final_target</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">car_location</span><span class="p">)</span><span class="w"> </span><span class="c1">// an ESTIMATION of how far we need to drive - this might be spot-on or fairly far off</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="kt">double</span><span class="w"> </span><span class="n">time_remaining</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intercept_time</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">current_time</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="kt">double</span><span class="w"> </span><span class="n">speed_required</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">distance_remaining</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">time_remaining</span>
</code></pre></div>
<p>This also has another benefit: you can easily know whether or not it's possible to reach the target in a given time. If the required speed is greater than 1410 (which is the max speed of a car without boost) or 2300 (if the car does have boost) then it's impossible to reach the target in the given time.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.94c44541.min.js"></script>
      
    
  </body>
</html>